apply plugin: 'com.android.library'
buildscript{
	repositories{
		mavenCentral()
		maven {
       		// All of React Native (JS, Obj-C sources, Android binaries) is installed from npm
       		url "$rootDir/../node_modules/react-native/android"
  		 }
	}
        dependencies {
		 classpath 'com.android.tools.build:gradle:1.3.1'
         classpath 'de.undercouch:gradle-download-task:2.0.0'
		
	}
}
android {
    compileSdkVersion 23
    buildToolsVersion "23.0.1"

    defaultConfig {
        minSdkVersion 16
        targetSdkVersion 22
        versionCode 1
        versionName "1.0"
        ndk {
            abiFilters "armeabi-v7a", "x86"
        }
    }
}

repositories {
   mavenLocal()
   jcenter()
   maven {
       // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm
       url "$rootDir/../node_modules/react-native/android"
   }
}
def resourcesDirRelease="$buildDir/intermediates/res/merged/release"

task compileReleaseWorker(type: Exec) {
	workingDir '../'
	commandLine("node", "node_modules/react-native/local-cli/cli.js", "bundle", "--platform", "android", "--dev", "false",
                            "--reset-cache", "--entry-file", "BleWorker.js", "--bundle-output", "BleWorker.bundle", "--assets-dest", resourcesDirRelease)
}

assembleRelease.dependsOn(compileReleaseWorker)
dependencies {
    compile 'com.facebook.react:react-native:+'
}
